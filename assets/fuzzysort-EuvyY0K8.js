function Ie(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var Z={exports:{}},ye=Z.exports,_e;function me(){return _e||(_e=1,function(A){((ne,Y)=>{A.exports?A.exports=Y():ne.fuzzysort=Y()})(ye,ne=>{var Y=(r,e)=>{if(!r||!e)return b;var a=le(r);O(e)||(e=M(e));var i=a.bitflags;return(i&e._bitflags)!==i?b:D(a,e)},ge=(r,e,a)=>{if(!r)return a!=null&&a.all?de(e,a):re;var i=le(r),v=i.bitflags,f=i.containsSpace,n=K((a==null?void 0:a.threshold)||0),s=(a==null?void 0:a.limit)||ee,t=0,_=0,u=e.length;function m(q){t<s?(W.add(q),++t):(++_,q._score>W.peek()._score&&W.replaceTop(q))}if(a!=null&&a.key)for(var L=a.key,g=0;g<u;++g){var y=e[g],o=Q(y,L);if(o&&(O(o)||(o=M(o)),(v&o._bitflags)===v)){var d=D(i,o);d!==b&&(d._score<n||(d.obj=y,m(d)))}}else if(a!=null&&a.keys){var T=a.keys,z=T.length;e:for(var g=0;g<u;++g){var y=e[g];{for(var I=0,c=0;c<z;++c){var L=T[c],o=Q(y,L);if(!o){j[c]=V;continue}O(o)||(o=M(o)),j[c]=o,I|=o._bitflags}if((v&I)!==v)continue}if(f)for(let h=0;h<i.spaceSearches.length;h++)N[h]=B;for(var c=0;c<z;++c){if(o=j[c],o===V){G[c]=V;continue}if(G[c]=D(i,o,!1,f),G[c]===b){G[c]=V;continue}if(f)for(let x=0;x<i.spaceSearches.length;x++){if(P[x]>-1e3&&N[x]>B){var S=(N[x]+P[x])/4;S>N[x]&&(N[x]=S)}P[x]>N[x]&&(N[x]=P[x])}}if(f){for(let h=0;h<i.spaceSearches.length;h++)if(N[h]===B)continue e}else{var l=!1;for(let h=0;h<z;h++)if(G[h]._score!==B){l=!0;break}if(!l)continue}var C=new ie(z);for(let h=0;h<z;h++)C[h]=G[h];if(f){var w=0;for(let h=0;h<i.spaceSearches.length;h++)w+=N[h]}else{var w=B;for(let x=0;x<z;x++){var d=C[x];if(d._score>-1e3&&w>B){var S=(w+d._score)/4;S>w&&(w=S)}d._score>w&&(w=d._score)}}if(C.obj=y,C._score=w,a!=null&&a.scoreFn){if(w=a.scoreFn(C),!w)continue;w=K(w),C._score=w}w<n||m(C)}}else for(var g=0;g<u;++g){var o=e[g];if(o&&(O(o)||(o=M(o)),(v&o._bitflags)===v)){var d=D(i,o);d!==b&&(d._score<n||m(d))}}if(t===0)return re;for(var E=new Array(t),g=t-1;g>=0;--g)E[g]=W.poll();return E.total=t+_,E},oe=(r,e="<b>",a="</b>")=>{for(var i=typeof e=="function"?e:void 0,v=r.target,f=v.length,n=r.indexes,s="",t=0,_=0,u=!1,m=[],L=0;L<f;++L){var g=v[L];if(n[_]===L){if(++_,u||(u=!0,i?(m.push(s),s=""):s+=e),_===n.length){i?(s+=g,m.push(i(s,t++)),s="",m.push(v.substr(L+1))):s+=g+a+v.substr(L+1);break}}else u&&(u=!1,i?(m.push(i(s,t++)),s=""):s+=a);s+=g}return i?m:s},$=r=>{typeof r=="number"?r=""+r:typeof r!="string"&&(r="");var e=U(r);return ve(r,{_targetLower:e._lower,_targetLowerCodes:e.lowerCodes,_bitflags:e.bitflags})},he=()=>{p.clear(),R.clear()};class fe{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((e,a)=>e-a)}set indexes(e){return this._indexes=e}highlight(e,a){return oe(this,e,a)}get score(){return te(this._score)}set score(e){this._score=K(e)}}class ie extends Array{get score(){return te(this._score)}set score(e){this._score=K(e)}}var ve=(r,e)=>{const a=new fe;return a.target=r,a.obj=e.obj??b,a._score=e._score??B,a._indexes=e._indexes??[],a._targetLower=e._targetLower??"",a._targetLowerCodes=e._targetLowerCodes??b,a._nextBeginningIndexes=e._nextBeginningIndexes??b,a._bitflags=e._bitflags??0,a},te=r=>r===B?0:r>1?r:Math.E**(((-r+1)**.04307-1)*-2),K=r=>r===0?B:r>1?r:1-Math.pow(Math.log(r)/-2+1,1/.04307),se=r=>{typeof r=="number"?r=""+r:typeof r!="string"&&(r=""),r=r.trim();var e=U(r),a=[];if(e.containsSpace){var i=r.split(/\s+/);i=[...new Set(i)];for(var v=0;v<i.length;v++)if(i[v]!==""){var f=U(i[v]);a.push({lowerCodes:f.lowerCodes,_lower:i[v].toLowerCase(),containsSpace:!1})}}return{lowerCodes:e.lowerCodes,_lower:e._lower,containsSpace:e.containsSpace,bitflags:e.bitflags,spaceSearches:a}},M=r=>{if(r.length>999)return $(r);var e=p.get(r);return e!==void 0||(e=$(r),p.set(r,e)),e},le=r=>{if(r.length>999)return se(r);var e=R.get(r);return e!==void 0||(e=se(r),R.set(r,e)),e},de=(r,e)=>{var a=[];a.total=r.length;var i=(e==null?void 0:e.limit)||ee;if(e!=null&&e.key)for(var v=0;v<r.length;v++){var f=r[v],n=Q(f,e.key);if(n!=b){O(n)||(n=M(n));var s=ve(n.target,{_score:n._score,obj:f});if(a.push(s),a.length>=i)return a}}else if(e!=null&&e.keys)for(var v=0;v<r.length;v++){for(var f=r[v],t=new ie(e.keys.length),_=e.keys.length-1;_>=0;--_){var n=Q(f,e.keys[_]);if(!n){t[_]=V;continue}O(n)||(n=M(n)),n._score=B,n._indexes.len=0,t[_]=n}if(t.obj=f,t._score=B,a.push(t),a.length>=i)return a}else for(var v=0;v<r.length;v++){var n=r[v];if(n!=b&&(O(n)||(n=M(n)),n._score=B,n._indexes.len=0,a.push(n),a.length>=i))return a}return a},D=(r,e,a=!1,i=!1)=>{if(a===!1&&r.containsSpace)return xe(r,e,i);for(var v=r._lower,f=r.lowerCodes,n=f[0],s=e._targetLowerCodes,t=f.length,_=s.length,g=0,u=0,m=0;;){var L=n===s[u];if(L){if(k[m++]=u,++g,g===t)break;n=f[g]}if(++u,u>=_)return b}var g=0,y=!1,o=0,d=e._nextBeginningIndexes;d===b&&(d=e._nextBeginningIndexes=be(e.target)),u=k[0]===0?0:d[k[0]-1];var T=0;if(u!==_)for(;;)if(u>=_){if(g<=0||(++T,T>200))break;--g;var z=H[--o];u=d[z]}else{var L=f[g]===s[u];if(L){if(H[o++]=u,++g,g===t){y=!0;break}++u}else u=d[u]}var I=t<=1?-1:e._targetLower.indexOf(v,k[0]),c=!!~I,S=c?I===0||e._nextBeginningIndexes[I-1]===I:!1;if(c&&!S){for(var l=0;l<d.length;l=d[l])if(!(l<=I)){for(var C=0;C<t&&f[C]===e._targetLowerCodes[l+C];C++);if(C===t){I=l,S=!0;break}}}var w=h=>{for(var x=0,ce=0,F=1;F<t;++F)h[F]-h[F-1]!==1&&(x-=h[F],++ce);var Le=h[t-1]-h[0]-(t-1);if(x-=(12+Le)*ce,h[0]!==0&&(x-=h[0]*h[0]*.2),!y)x*=1e3;else{for(var ae=1,F=d[0];F<_;F=d[F])++ae;ae>24&&(x*=(ae-24)*10)}return x-=(_-t)/2,c&&(x/=1+t*t*1),S&&(x/=1+t*t*1),x-=(_-t)/2,x};if(y)if(S){for(var l=0;l<t;++l)k[l]=I+l;var E=k,q=w(k)}else var E=H,q=w(H);else{if(c)for(var l=0;l<t;++l)k[l]=I+l;var E=k,q=w(E)}e._score=q;for(var l=0;l<t;++l)e._indexes[l]=E[l];e._indexes.len=t;const X=new fe;return X.target=e.target,X._score=e._score,X._indexes=e._indexes,X},xe=(r,e,a)=>{for(var i=new Set,v=0,f=b,n=0,s=r.spaceSearches,t=s.length,_=0,u=()=>{for(let S=_-1;S>=0;S--)e._nextBeginningIndexes[J[S*2+0]]=J[S*2+1]},m=!1,c=0;c<t;++c){P[c]=B;var L=s[c];if(f=D(L,e),a){if(f===b)continue;m=!0}else if(f===b)return u(),b;var g=c===t-1;if(!g){var y=f._indexes,o=!0;for(let l=0;l<y.len-1;l++)if(y[l+1]-y[l]!==1){o=!1;break}if(o){var d=y[y.len-1]+1,T=e._nextBeginningIndexes[d-1];for(let l=d-1;l>=0&&T===e._nextBeginningIndexes[l];l--)e._nextBeginningIndexes[l]=d,J[_*2+0]=l,J[_*2+1]=T,_++}}v+=f._score/t,P[c]=f._score/t,f._indexes[0]<n&&(v-=(n-f._indexes[0])*2),n=f._indexes[0];for(var z=0;z<f._indexes.len;++z)i.add(f._indexes[z])}if(a&&!m)return b;u();var I=D(r,e,!0);if(I!==b&&I._score>v){if(a)for(var c=0;c<t;++c)P[c]=I._score/t;return I}a&&(f=e),f._score=v;var c=0;for(let S of i)f._indexes[c++]=S;return f._indexes.len=c,f},ue=r=>r.replace(new RegExp("\\p{Script=Latin}+","gu"),e=>e.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),U=r=>{r=ue(r);for(var e=r.length,a=r.toLowerCase(),i=[],v=0,f=!1,n=0;n<e;++n){var s=i[n]=a.charCodeAt(n);if(s===32){f=!0;continue}var t=s>=97&&s<=122?s-97:s>=48&&s<=57?26:s<=127?30:31;v|=1<<t}return{lowerCodes:i,bitflags:v,containsSpace:f,_lower:a}},we=r=>{for(var e=r.length,a=[],i=0,v=!1,f=!1,n=0;n<e;++n){var s=r.charCodeAt(n),t=s>=65&&s<=90,_=t||s>=97&&s<=122||s>=48&&s<=57,u=t&&!v||!f||!_;v=t,f=_,u&&(a[i++]=n)}return a},be=r=>{r=ue(r);for(var e=r.length,a=we(r),i=[],v=a[0],f=0,n=0;n<e;++n)v>n?i[n]=v:(v=a[++f],i[n]=v===void 0?e:v);return i},p=new Map,R=new Map,k=[],H=[],J=[],N=[],P=[],j=[],G=[],Q=(r,e)=>{var a=r[e];if(a!==void 0)return a;if(typeof e=="function")return e(r);var i=e;Array.isArray(e)||(i=e.split("."));for(var v=i.length,f=-1;r&&++f<v;)r=r[i[f]];return r},O=r=>typeof r=="object"&&typeof r._bitflags=="number",ee=1/0,B=-ee,re=[];re.total=0;var b=null,V=$(""),Se=r=>{var e=[],a=0,i={},v=f=>{for(var n=0,s=e[n],t=1;t<a;){var _=t+1;n=t,_<a&&e[_]._score<e[t]._score&&(n=_),e[n-1>>1]=e[n],t=1+(n<<1)}for(var u=n-1>>1;n>0&&s._score<e[u]._score;u=(n=u)-1>>1)e[n]=e[u];e[n]=s};return i.add=f=>{var n=a;e[a++]=f;for(var s=n-1>>1;n>0&&f._score<e[s]._score;s=(n=s)-1>>1)e[n]=e[s];e[n]=f},i.poll=f=>{if(a!==0){var n=e[0];return e[0]=e[--a],v(),n}},i.peek=f=>{if(a!==0)return e[0]},i.replaceTop=f=>{e[0]=f,v()},i},W=Se();return{single:Y,go:ge,prepare:$,cleanup:he}})}(Z)),Z.exports}var Be=me();const Ce=Ie(Be);export{Ce as f};
