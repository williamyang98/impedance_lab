import{d as Ce,j as be,a as ze,l as Ne,b as fe,f as M,e as Fe,g as Se,w as Te,u as Ee,m as Ve,F as Ae,r as Me,C as $e,o as ce,t as qe}from"./index-CX7YUebY.js";import{g as Oe,e as Pe,f as De,B as Ge,b as Ye,d as Ke,C as Ue,h as je,S as He,a as Je}from"./editor_templates-DRMK0Xyj.js";function Qe(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}var ve={exports:{}},We=ve.exports,ke;function Xe(){return ke||(ke=1,function(T){((X,O)=>{T.exports?T.exports=O():X.fuzzysort=O()})(We,X=>{var O=(r,e)=>{if(!r||!e)return b;var a=p(r);G(e)||(e=v(e));var s=a.bitflags;return(s&e._bitflags)!==s?b:I(a,e)},ue=(r,e,a)=>{if(!r)return a!=null&&a.all?w(e,a):pe;var s=p(r),i=s.bitflags,n=s.containsSpace,t=P((a==null?void 0:a.threshold)||0),f=(a==null?void 0:a.limit)||xe,l=0,_=0,u=e.length;function C(Y){l<f?(ie.add(Y),++l):(++_,Y._score>ie.peek()._score&&ie.replaceTop(Y))}if(a!=null&&a.key)for(var k=a.key,d=0;d<u;++d){var B=e[d],g=se(B,k);if(g&&(G(g)||(g=v(g)),(i&g._bitflags)===i)){var m=I(s,g);m!==b&&(m._score<t||(m.obj=B,C(m)))}}else if(a!=null&&a.keys){var $=a.keys,F=$.length;e:for(var d=0;d<u;++d){var B=e[d];{for(var L=0,o=0;o<F;++o){var k=$[o],g=se(B,k);if(!g){me[o]=W;continue}G(g)||(g=v(g)),me[o]=g,L|=g._bitflags}if((i&L)!==i)continue}if(n)for(let h=0;h<s.spaceSearches.length;h++)V[h]=z;for(var o=0;o<F;++o){if(g=me[o],g===W){J[o]=W;continue}if(J[o]=I(s,g,!1,n),J[o]===b){J[o]=W;continue}if(n)for(let x=0;x<s.spaceSearches.length;x++){if(D[x]>-1e3&&V[x]>z){var S=(V[x]+D[x])/4;S>V[x]&&(V[x]=S)}D[x]>V[x]&&(V[x]=D[x])}}if(n){for(let h=0;h<s.spaceSearches.length;h++)if(V[h]===z)continue e}else{var c=!1;for(let h=0;h<F;h++)if(J[h]._score!==z){c=!0;break}if(!c)continue}var N=new R(F);for(let h=0;h<F;h++)N[h]=J[h];if(n){var y=0;for(let h=0;h<s.spaceSearches.length;h++)y+=V[h]}else{var y=z;for(let x=0;x<F;x++){var m=N[x];if(m._score>-1e3&&y>z){var S=(y+m._score)/4;S>y&&(y=S)}m._score>y&&(y=m._score)}}if(N.obj=B,N._score=y,a!=null&&a.scoreFn){if(y=a.scoreFn(N),!y)continue;y=P(y),N._score=y}y<t||C(N)}}else for(var d=0;d<u;++d){var g=e[d];if(g&&(G(g)||(g=v(g)),(i&g._bitflags)===i)){var m=I(s,g);m!==b&&(m._score<t||C(m))}}if(l===0)return pe;for(var q=new Array(l),d=l-1;d>=0;--d)q[d]=ie.poll();return q.total=l+_,q},Q=(r,e="<b>",a="</b>")=>{for(var s=typeof e=="function"?e:void 0,i=r.target,n=i.length,t=r.indexes,f="",l=0,_=0,u=!1,C=[],k=0;k<n;++k){var d=i[k];if(t[_]===k){if(++_,u||(u=!0,s?(C.push(f),f=""):f+=e),_===t.length){s?(f+=d,C.push(s(f,l++)),f="",C.push(i.substr(k+1))):f+=d+a+i.substr(k+1);break}}else u&&(u=!1,s?(C.push(s(f,l++)),f=""):f+=a);f+=d}return s?C:f},K=r=>{typeof r=="number"?r=""+r:typeof r!="string"&&(r="");var e=H(r);return U(r,{_targetLower:e._lower,_targetLowerCodes:e.lowerCodes,_bitflags:e.bitflags})},oe=()=>{ge.clear(),he.clear()};class Z{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((e,a)=>e-a)}set indexes(e){return this._indexes=e}highlight(e,a){return Q(this,e,a)}get score(){return j(this._score)}set score(e){this._score=P(e)}}class R extends Array{get score(){return j(this._score)}set score(e){this._score=P(e)}}var U=(r,e)=>{const a=new Z;return a.target=r,a.obj=e.obj??b,a._score=e._score??z,a._indexes=e._indexes??[],a._targetLower=e._targetLower??"",a._targetLowerCodes=e._targetLowerCodes??b,a._nextBeginningIndexes=e._nextBeginningIndexes??b,a._bitflags=e._bitflags??0,a},j=r=>r===z?0:r>1?r:Math.E**(((-r+1)**.04307-1)*-2),P=r=>r===0?z:r>1?r:1-Math.pow(Math.log(r)/-2+1,1/.04307),ee=r=>{typeof r=="number"?r=""+r:typeof r!="string"&&(r=""),r=r.trim();var e=H(r),a=[];if(e.containsSpace){var s=r.split(/\s+/);s=[...new Set(s)];for(var i=0;i<s.length;i++)if(s[i]!==""){var n=H(s[i]);a.push({lowerCodes:n.lowerCodes,_lower:s[i].toLowerCase(),containsSpace:!1})}}return{lowerCodes:e.lowerCodes,_lower:e._lower,containsSpace:e.containsSpace,bitflags:e.bitflags,spaceSearches:a}},v=r=>{if(r.length>999)return K(r);var e=ge.get(r);return e!==void 0||(e=K(r),ge.set(r,e)),e},p=r=>{if(r.length>999)return ee(r);var e=he.get(r);return e!==void 0||(e=ee(r),he.set(r,e)),e},w=(r,e)=>{var a=[];a.total=r.length;var s=(e==null?void 0:e.limit)||xe;if(e!=null&&e.key)for(var i=0;i<r.length;i++){var n=r[i],t=se(n,e.key);if(t!=b){G(t)||(t=v(t));var f=U(t.target,{_score:t._score,obj:n});if(a.push(f),a.length>=s)return a}}else if(e!=null&&e.keys)for(var i=0;i<r.length;i++){for(var n=r[i],l=new R(e.keys.length),_=e.keys.length-1;_>=0;--_){var t=se(n,e.keys[_]);if(!t){l[_]=W;continue}G(t)||(t=v(t)),t._score=z,t._indexes.len=0,l[_]=t}if(l.obj=n,l._score=z,a.push(l),a.length>=s)return a}else for(var i=0;i<r.length;i++){var t=r[i];if(t!=b&&(G(t)||(t=v(t)),t._score=z,t._indexes.len=0,a.push(t),a.length>=s))return a}return a},I=(r,e,a=!1,s=!1)=>{if(a===!1&&r.containsSpace)return _e(r,e,s);for(var i=r._lower,n=r.lowerCodes,t=n[0],f=e._targetLowerCodes,l=n.length,_=f.length,d=0,u=0,C=0;;){var k=t===f[u];if(k){if(E[C++]=u,++d,d===l)break;t=n[d]}if(++u,u>=_)return b}var d=0,B=!1,g=0,m=e._nextBeginningIndexes;m===b&&(m=e._nextBeginningIndexes=de(e.target)),u=E[0]===0?0:m[E[0]-1];var $=0;if(u!==_)for(;;)if(u>=_){if(d<=0||(++$,$>200))break;--d;var F=te[--g];u=m[F]}else{var k=n[d]===f[u];if(k){if(te[g++]=u,++d,d===l){B=!0;break}++u}else u=m[u]}var L=l<=1?-1:e._targetLower.indexOf(i,E[0]),o=!!~L,S=o?L===0||e._nextBeginningIndexes[L-1]===L:!1;if(o&&!S){for(var c=0;c<m.length;c=m[c])if(!(c<=L)){for(var N=0;N<l&&n[N]===e._targetLowerCodes[c+N];N++);if(N===l){L=c,S=!0;break}}}var y=h=>{for(var x=0,ye=0,A=1;A<l;++A)h[A]-h[A-1]!==1&&(x-=h[A],++ye);var Be=h[l-1]-h[0]-(l-1);if(x-=(12+Be)*ye,h[0]!==0&&(x-=h[0]*h[0]*.2),!B)x*=1e3;else{for(var we=1,A=m[0];A<_;A=m[A])++we;we>24&&(x*=(we-24)*10)}return x-=(_-l)/2,o&&(x/=1+l*l*1),S&&(x/=1+l*l*1),x-=(_-l)/2,x};if(B)if(S){for(var c=0;c<l;++c)E[c]=L+c;var q=E,Y=y(E)}else var q=te,Y=y(te);else{if(o)for(var c=0;c<l;++c)E[c]=L+c;var q=E,Y=y(q)}e._score=Y;for(var c=0;c<l;++c)e._indexes[c]=q[c];e._indexes.len=l;const le=new Z;return le.target=e.target,le._score=e._score,le._indexes=e._indexes,le},_e=(r,e,a)=>{for(var s=new Set,i=0,n=b,t=0,f=r.spaceSearches,l=f.length,_=0,u=()=>{for(let S=_-1;S>=0;S--)e._nextBeginningIndexes[ne[S*2+0]]=ne[S*2+1]},C=!1,o=0;o<l;++o){D[o]=z;var k=f[o];if(n=I(k,e),a){if(n===b)continue;C=!0}else if(n===b)return u(),b;var d=o===l-1;if(!d){var B=n._indexes,g=!0;for(let c=0;c<B.len-1;c++)if(B[c+1]-B[c]!==1){g=!1;break}if(g){var m=B[B.len-1]+1,$=e._nextBeginningIndexes[m-1];for(let c=m-1;c>=0&&$===e._nextBeginningIndexes[c];c--)e._nextBeginningIndexes[c]=m,ne[_*2+0]=c,ne[_*2+1]=$,_++}}i+=n._score/l,D[o]=n._score/l,n._indexes[0]<t&&(i-=(t-n._indexes[0])*2),t=n._indexes[0];for(var F=0;F<n._indexes.len;++F)s.add(n._indexes[F])}if(a&&!C)return b;u();var L=I(r,e,!0);if(L!==b&&L._score>i){if(a)for(var o=0;o<l;++o)D[o]=L._score/l;return L}a&&(n=e),n._score=i;var o=0;for(let S of s)n._indexes[o++]=S;return n._indexes.len=o,n},re=r=>r.replace(new RegExp("\\p{Script=Latin}+","gu"),e=>e.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),H=r=>{r=re(r);for(var e=r.length,a=r.toLowerCase(),s=[],i=0,n=!1,t=0;t<e;++t){var f=s[t]=a.charCodeAt(t);if(f===32){n=!0;continue}var l=f>=97&&f<=122?f-97:f>=48&&f<=57?26:f<=127?30:31;i|=1<<l}return{lowerCodes:s,bitflags:i,containsSpace:n,_lower:a}},ae=r=>{for(var e=r.length,a=[],s=0,i=!1,n=!1,t=0;t<e;++t){var f=r.charCodeAt(t),l=f>=65&&f<=90,_=l||f>=97&&f<=122||f>=48&&f<=57,u=l&&!i||!n||!_;i=l,n=_,u&&(a[s++]=t)}return a},de=r=>{r=re(r);for(var e=r.length,a=ae(r),s=[],i=a[0],n=0,t=0;t<e;++t)i>t?s[t]=i:(i=a[++n],s[t]=i===void 0?e:i);return s},ge=new Map,he=new Map,E=[],te=[],ne=[],V=[],D=[],me=[],J=[],se=(r,e)=>{var a=r[e];if(a!==void 0)return a;if(typeof e=="function")return e(r);var s=e;Array.isArray(e)||(s=e.split("."));for(var i=s.length,n=-1;r&&++n<i;)r=r[s[n]];return r},G=r=>typeof r=="object"&&typeof r._bitflags=="number",xe=1/0,z=-xe,pe=[];pe.total=0;var b=null,W=K(""),Ie=r=>{var e=[],a=0,s={},i=n=>{for(var t=0,f=e[t],l=1;l<a;){var _=l+1;t=l,_<a&&e[_]._score<e[l]._score&&(t=_),e[t-1>>1]=e[t],l=1+(t<<1)}for(var u=t-1>>1;t>0&&f._score<e[u]._score;u=(t=u)-1>>1)e[t]=e[u];e[t]=f};return s.add=n=>{var t=a;e[a++]=n;for(var f=t-1>>1;t>0&&n._score<e[f]._score;f=(t=f)-1>>1)e[t]=e[f];e[t]=n},s.poll=n=>{if(a!==0){var t=e[0];return e[0]=e[--a],i(),t}},s.peek=n=>{if(a!==0)return e[0]},s.replaceTop=n=>{e[0]=n,i()},s},ie=Ie();return{single:O,go:ue,prepare:K,cleanup:oe}})}(ve)),ve.exports}var Ze=Xe();const Le=Qe(Ze),Re={class:"w-full"},er={class:"flex flex-row justify-center w-full mb-2"},rr={class:"input"},ar={class:"w-full grid grid-cols-[repeat(auto-fit,minmax(20rem,1fr))] gap-x-2 gap-y-2 overflow-auto"},tr=["href"],nr={class:"card-body p-3"},sr={class:"card-title w-full justify-center text-center"},ir={class:"w-full h-full flex flex-col justify-center"},lr={class:"w-full rounded-sm bg-white"},fr={key:0,class:"text-center py-2 w-full"},ur=Ce({__name:"TemplatesView",setup(T){const X=new Oe;function O(v){return[v.type,v.layer,v.trace].join(" ").split(" ").map(p=>{var w;return((w=p.at(0))==null?void 0:w.toUpperCase())+p.substring(1).toLowerCase()}).join(" ")}function ue(v){return`type=${v.type}&layer=${v.layer}&trace=${v.trace}`}const Q=[],K=[{name:"broadside",ctor:Ge,layer_templates:De,trace_templates:Pe},{name:"colinear",ctor:Ue,layer_templates:Ke,trace_templates:Ye}];for(const v of K)for(const[p,w]of Object.entries(v.layer_templates))for(const[I,_e]of Object.entries(v.trace_templates)){const re=new v.ctor(X,_e,w),H={type:v.name,trace:I,layer:p},ae=O(H),de=Le.prepare(ae);Q.push({editor:re,tag:H,title:ae,prepared_title:de})}const oe={...je(),stackup_minimum_width:150,stackup_minimum_x_padding:25},Z=$e();function R(v){const w=`/stackup_2d/editor?${ue(v.tag)}`;return Z.resolve(w).href}const U=be(void 0),j=be(void 0),P=ze(()=>{const v=j.value;return v===void 0?Q:v.map(p=>p.template)});function ee(v){if(v===void 0||v.length===0){j.value=void 0;return}const p=[];for(const w of Q){const I=Le.single(v,w.prepared_title);I!==null&&p.push({template:w,result:I})}p.sort((w,I)=>I.result.score-w.result.score),j.value=p}return Ne(U,v=>{ee(v)}),(v,p)=>(ce(),fe("div",Re,[M("div",er,[M("label",rr,[Se(Ee(He),{class:"w-[1.25rem] h-[1.25rem]"}),Te(M("input",{type:"search",placeholder:"Search","onUpdate:modelValue":p[0]||(p[0]=w=>U.value=w)},null,512),[[Ve,U.value]])])]),M("div",ar,[(ce(!0),fe(Ae,null,Me(P.value,(w,I)=>(ce(),fe("a",{key:I,class:"card card-border bg-base-100 hover:bg-base-300 select-none cursor-pointer",href:R(w)},[M("div",nr,[M("div",sr,qe(O(w.tag)),1),M("div",ir,[M("div",lr,[Se(Je,{stackup:w.editor.get_simulation_stackup(),config:oe},null,8,["stackup"])])])])],8,tr))),128))]),P.value.length===0?(ce(),fe("div",fr,p[1]||(p[1]=[M("h1",{class:"text-2xl"},"No search results",-1)]))):Fe("",!0)]))}});export{ur as default};
